<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tbilisi City Quest ‚Äî Feedback</title>

  <style>
    body{
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      margin:0;
      background:#f6f7fb;
      color:#111827;
    }
    .wrap{max-width:980px;margin:0 auto;padding:20px}
    .card{
      background:#fff;
      border-radius:16px;
      padding:18px;
      box-shadow:0 6px 24px rgba(0,0,0,.06);
      margin-bottom:14px
    }
    h1{margin:0 0 6px;font-size:22px;font-weight:600}
    .muted{color:#667085;font-size:14px;line-height:1.45;font-weight:400}
    .qtitle{margin:0 0 4px;font-size:17px;font-weight:600}
    .qsub{margin:0 0 10px;font-size:13px;color:#667085;font-weight:400}
    label{display:block;margin:10px 0 6px;font-weight:500}
    input[type="text"], textarea, select{
      width:100%;
      box-sizing:border-box;
      border:1px solid #d0d5dd;
      border-radius:12px;
      padding:10px 12px;
      font-size:15px;
      background:#fff;
    }
    textarea{min-height:90px;resize:vertical}
    .options{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .opt{display:flex;gap:10px;align-items:flex-start;font-size:14px;line-height:1.4}
    .opt input{margin-top:3px}
    .hr{height:1px;background:#eef2f6;margin:18px 0}
    .btn{
      display:inline-block;background:#111827;color:#fff;border:0;border-radius:12px;
      padding:11px 16px;font-size:15px;cursor:pointer;
    }
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .ok{color:#16a34a;font-weight:600;margin-top:10px}
    .err{color:#dc2626;font-weight:600;margin-top:10px}

    .langbar{display:flex;gap:10px;align-items:center;justify-content:space-between}
    .langbtns{display:flex;gap:8px}
    .chip{
      border:1px solid #d0d5dd;background:#fff;border-radius:999px;
      padding:6px 12px;font-size:13px;cursor:pointer;font-weight:400;
    }
    .chip.active{background:#111827;color:#fff;border-color:#111827}

    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:760px){ .grid2{grid-template-columns:1fr} }

    .taskLabel{
      font-size:13px;
      color:#667085;
      margin-top:2px;
      line-height:1.35;
    }
  </style>
</head>

<body>
<div class="wrap">

  <div class="card">
    <div class="langbar">
      <div>
        <h1 data-i18n="title">Tbilisi City Quest ‚Äî Feedback</h1>
        <div class="muted" data-i18n="intro">
          Thank you for joining the quest. Your feedback helps improve future quests.
        </div>
      </div>
      <div class="langbtns">
        <button type="button" class="chip" id="btnEN">EN</button>
        <button type="button" class="chip active" id="btnRU">RU</button>
      </div>
    </div>
  </div>

  <form id="feedbackForm" class="card">
    <input type="hidden" name="lang" id="lang" value="ru"/>
    <input type="hidden" name="device_time" id="device_time"/>
    <input type="hidden" name="source_page" id="source_page"/>

    <!-- 1 -->
    <div class="qtitle" data-i18n="q1_title">–ö–∞–∫ –≤–∞–º –≤ —Ü–µ–ª–æ–º –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è Tbilisi City Quest? (1‚Äì10)</div>
    <div class="qsub" data-i18n="q1_sub">10 ‚Äî —ç—Ç–æ –º–∞–∫—Å–∏–º—É–º (–∑–Ω–∞—á–∏—Ç –≤–∞–º –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å).</div>
    <select name="overall_10" required>
      <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
      <option>10</option><option>9</option><option>8</option><option>7</option><option>6</option>
      <option>5</option><option>4</option><option>3</option><option>2</option><option>1</option>
    </select>

    <div class="hr"></div>

    <!-- 2 -->
    <div class="qtitle" data-i18n="q2_title">–ß—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?</div>
    <div class="qsub" data-i18n="q2_sub">–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.</div>
    <div class="options">
      <label class="opt"><input type="checkbox" name="liked_most_opt" value="Tasks & questions"><span data-i18n="lm1">–ó–∞–¥–∞–Ω–∏—è –∏ –≤–æ–ø—Ä–æ—Å—ã</span></label>
      <label class="opt"><input type="checkbox" name="liked_most_opt" value="Culture & history"><span data-i18n="lm2">–ö—É–ª—å—Ç—É—Ä–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è</span></label>
      <label class="opt"><input type="checkbox" name="liked_most_opt" value="Route & city"><span data-i18n="lm3">–ú–∞—Ä—à—Ä—É—Ç –∏ –≥–æ—Ä–æ–¥</span></label>
      <label class="opt"><input type="checkbox" name="liked_most_opt" value="Bonus questions"><span data-i18n="lm4">–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã</span></label>
      <label class="opt"><input type="checkbox" name="liked_most_opt" value="Improv game at the hotel"><span data-i18n="lm5">–ò–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è –∏–≥—Ä–∞ –≤ –æ—Ç–µ–ª–µ</span></label>
      <label class="opt"><input type="checkbox" name="liked_most_opt" value="Khinkali at Zodiaco"><span data-i18n="lm6">–•–∏–Ω–∫–∞–ª–∏ –≤ Zodiaco</span></label>
    </div>

    <div class="hr"></div>

    <!-- 3 -->
    <div class="qtitle" data-i18n="q3_title">–ö–∞–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π –≤–∞–º –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ?</div>
    <div class="qsub" data-i18n="q3_sub">–ö–∞–∫–∏–µ —Ç–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑? (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)</div>
    <div class="options">
      <label class="opt"><input type="checkbox" name="add_types_opt" value="Logic puzzles"><span data-i18n="at1">–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏</span></label>
      <label class="opt"><input type="checkbox" name="add_types_opt" value="Music contests"><span data-i18n="at2">–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∫–æ–Ω–∫—É—Ä—Å—ã</span></label>
      <label class="opt"><input type="checkbox" name="add_types_opt" value="Painting tasks"><span data-i18n="at3">–ó–∞–¥–∞–Ω–∏—è —Å –∂–∏–≤–æ–ø–∏—Å—å—é ‚Äî —á—Ç–æ-—Ç–æ –∏–∑–æ–±—Ä–∞–∑–∏—Ç—å</span></label>
      <label class="opt"><input type="checkbox" name="add_types_opt" value="Emotional tasks"><span data-i18n="at4">–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ-–ø—É–≥–∞—é—â–∏–µ –∑–∞–¥–∞–Ω–∏—è</span></label>
      <label class="opt"><input type="checkbox" name="add_types_opt" value="Sport challenges"><span data-i18n="at5">–ó–∞–¥–∞–Ω–∏—è –Ω–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π</span></label>
    </div>

    <div class="hr"></div>

    <!-- 4 -->
    <div class="qtitle" data-i18n="q4_title">–ë—ã–ª–∏ –ª–∏ –∑–∞–¥–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑–∞–ª–∏—Å—å —Å–ª–æ–∂–Ω—ã–º–∏ –∏–ª–∏ –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–º–∏?</div>
    <div class="qsub" data-i18n="q4_sub">–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.</div>

    <div class="options" id="hardTasksBlock">
      <label class="opt">
        <input type="checkbox" name="hard_tasks_opt" value="None" data-none>
        <span data-i18n="none">–ù–µ—Ç</span>
      </label>

      <label class="opt"><input type="checkbox" name="hard_tasks_opt" value="Task 1">
        <span>
          <span data-i18n="task1_title">–û—Ç–µ–ª—å Biltmore</span>
          <span class="taskLabel" data-i18n="task1_desc">‚Äî –§–∞–º–∏–ª–∏—è —Ñ–∏–ª–æ—Å–æ—Ñ–∞.</span>
        </span>
      </label>

      <label class="opt"><input type="checkbox" name="hard_tasks_opt" value="Task 2">
        <span>
          <span data-i18n="task2_title">–ú—É–∑–µ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞ (MoMA)</span>
          <span class="taskLabel" data-i18n="task2_desc">‚Äî –Ø–±–ª–æ–∫–æ</span>
        </span>
      </label>

      <label class="opt"><input type="checkbox" name="hard_tasks_opt" value="Task 3">
        <span>
          <span data-i18n="task3_title">–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è</span>
          <span class="taskLabel" data-i18n="task3_desc">‚Äî –•—É–¥–æ–∂–Ω–∏–∫ —Å –∫–∏—Å—Ç–æ—á–∫–æ–π –∏ –ø–∞–ª–∏—Ç—Ä–æ–π</span>
        </span>
      </label>

      <label class="opt"><input type="checkbox" name="hard_tasks_opt" value="Task 4">
        <span>
          <span data-i18n="task4_title">–ü–∞—Ä–∫ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞</span>
          <span class="taskLabel" data-i18n="task4_desc">‚Äî –ü–∞–º—è—Ç–Ω–∏–∫ —Ö—É–¥–æ–∂–Ω–∏–∫—É –∏ —Å–æ–±–∞–∫–∞</span>
        </span>
      </label>

      <label class="opt"><input type="checkbox" name="hard_tasks_opt" value="Task 5">
        <span>
          <span data-i18n="task5_title">–°–∞–¥ –û—Ä–±–µ–ª–∏–∞–Ω–∏</span>
          <span class="taskLabel" data-i18n="task5_desc">‚Äî 6 –º—É–∑—ã–∫–∞–Ω—Ç–æ–≤: –Ω–∞–π–¥–∏—Ç–µ —Ç–æ–≥–æ, –∫—Ç–æ –≤ –±–∞–±–æ—á–∫–µ</span>
        </span>
      </label>

      <label class="opt"><input type="checkbox" name="hard_tasks_opt" value="Task 6">
        <span>
          <span data-i18n="task6_title">–õ–∞–≥–∏–¥–∑–µ</span>
          <span class="taskLabel" data-i18n="task6_desc">‚Äî –ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä</span>
        </span>
      </label>

      <label class="opt"><input type="checkbox" name="hard_tasks_opt" value="Task 7">
        <span>
          <span data-i18n="task7_title">Ambassadori Hotel</span>
          <span class="taskLabel" data-i18n="task7_desc">‚Äî –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å –ü–∏—Ä–æ—Å–º–∞–Ω–∏</span>
        </span>
      </label>

      <label class="opt"><input type="checkbox" name="hard_tasks_opt" value="Task 8">
        <span>
          <span data-i18n="task8_title">–ò–µ—Ç–∏–º –ì—É—Ä–¥–∂–∏</span>
          <span class="taskLabel" data-i18n="task8_desc">‚Äî –ü–µ–≤–µ—Ü –∏ –ø—Ç–∏—Ü–∞</span>
        </span>
      </label>

      <label class="opt"><input type="checkbox" name="hard_tasks_opt" value="Task 9">
        <span>
          <span data-i18n="task9_title">–ö–∞–Ω—å–æ–Ω</span>
          <span class="taskLabel" data-i18n="task9_desc">‚Äî –†–∞—Å—à–∏—Ñ—Ä—É–π—Ç–µ ‚Äú–î–ù–ö –ª—é–±–≤–∏‚Äù</span>
        </span>
      </label>
    </div>

    <div class="hr"></div>

    <!-- 5 -->
    <div class="qtitle" data-i18n="q5_title">–û—Ü–µ–Ω–∏—Ç–µ –∫–∞–∂–¥–æ–µ –∏–∑ 9 –∑–∞–¥–∞–Ω–∏–π (1‚Äì5)</div>
    <div class="qsub" data-i18n="q5_sub">1 ‚Äî –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å, 5 ‚Äî –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å.</div>

    <div class="grid2">
      <div>
        <label data-i18n="task1_title">–û—Ç–µ–ª—å Biltmore</label>
        <div class="taskLabel" data-i18n="task1_desc">‚Äî –§–∞–º–∏–ª–∏—è —Ñ–∏–ª–æ—Å–æ—Ñ–∞.</div>
        <select name="task1_rating" class="ratingSelect">
          <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
          <option value="5" data-rate="5"></option>
          <option value="4" data-rate="4"></option>
          <option value="3" data-rate="3"></option>
          <option value="2" data-rate="2"></option>
          <option value="1" data-rate="1"></option>
        </select>
      </div>

      <div>
        <label data-i18n="task2_title">–ú—É–∑–µ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞ (MoMA)</label>
        <div class="taskLabel" data-i18n="task2_desc">‚Äî –Ø–±–ª–æ–∫–æ</div>
        <select name="task2_rating" class="ratingSelect">
          <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
          <option value="5" data-rate="5"></option>
          <option value="4" data-rate="4"></option>
          <option value="3" data-rate="3"></option>
          <option value="2" data-rate="2"></option>
          <option value="1" data-rate="1"></option>
        </select>
      </div>

      <div>
        <label data-i18n="task3_title">–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è</label>
        <div class="taskLabel" data-i18n="task3_desc">‚Äî –•—É–¥–æ–∂–Ω–∏–∫ —Å –∫–∏—Å—Ç–æ—á–∫–æ–π –∏ –ø–∞–ª–∏—Ç—Ä–æ–π</div>
        <select name="task3_rating" class="ratingSelect">
          <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
          <option value="5" data-rate="5"></option>
          <option value="4" data-rate="4"></option>
          <option value="3" data-rate="3"></option>
          <option value="2" data-rate="2"></option>
          <option value="1" data-rate="1"></option>
        </select>
      </div>

      <div>
        <label data-i18n="task4_title">–ü–∞—Ä–∫ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞</label>
        <div class="taskLabel" data-i18n="task4_desc">‚Äî –ü–∞–º—è—Ç–Ω–∏–∫ —Ö—É–¥–æ–∂–Ω–∏–∫—É –∏ —Å–æ–±–∞–∫–∞</div>
        <select name="task4_rating" class="ratingSelect">
          <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
          <option value="5" data-rate="5"></option>
          <option value="4" data-rate="4"></option>
          <option value="3" data-rate="3"></option>
          <option value="2" data-rate="2"></option>
          <option value="1" data-rate="1"></option>
        </select>
      </div>

      <div>
        <label data-i18n="task5_title">–°–∞–¥ –û—Ä–±–µ–ª–∏–∞–Ω–∏</label>
        <div class="taskLabel" data-i18n="task5_desc">‚Äî 6 –º—É–∑—ã–∫–∞–Ω—Ç–æ–≤: –Ω–∞–π–¥–∏—Ç–µ —Ç–æ–≥–æ, –∫—Ç–æ –≤ –±–∞–±–æ—á–∫–µ</div>
        <select name="task5_rating" class="ratingSelect">
          <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
          <option value="5" data-rate="5"></option>
          <option value="4" data-rate="4"></option>
          <option value="3" data-rate="3"></option>
          <option value="2" data-rate="2"></option>
          <option value="1" data-rate="1"></option>
        </select>
      </div>

      <div>
        <label data-i18n="task6_title">–õ–∞–≥–∏–¥–∑–µ</label>
        <div class="taskLabel" data-i18n="task6_desc">‚Äî –ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä</div>
        <select name="task6_rating" class="ratingSelect">
          <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
          <option value="5" data-rate="5"></option>
          <option value="4" data-rate="4"></option>
          <option value="3" data-rate="3"></option>
          <option value="2" data-rate="2"></option>
          <option value="1" data-rate="1"></option>
        </select>
      </div>

      <div>
        <label data-i18n="task7_title">Ambassadori Hotel</label>
        <div class="taskLabel" data-i18n="task7_desc">‚Äî –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å –ü–∏—Ä–æ—Å–º–∞–Ω–∏</div>
        <select name="task7_rating" class="ratingSelect">
          <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
          <option value="5" data-rate="5"></option>
          <option value="4" data-rate="4"></option>
          <option value="3" data-rate="3"></option>
          <option value="2" data-rate="2"></option>
          <option value="1" data-rate="1"></option>
        </select>
      </div>

      <div>
        <label data-i18n="task8_title">–ò–µ—Ç–∏–º –ì—É—Ä–¥–∂–∏</label>
        <div class="taskLabel" data-i18n="task8_desc">‚Äî –ü–µ–≤–µ—Ü –∏ –ø—Ç–∏—Ü–∞</div>
        <select name="task8_rating" class="ratingSelect">
          <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
          <option value="5" data-rate="5"></option>
          <option value="4" data-rate="4"></option>
          <option value="3" data-rate="3"></option>
          <option value="2" data-rate="2"></option>
          <option value="1" data-rate="1"></option>
        </select>
      </div>

      <div>
        <label data-i18n="task9_title">–ö–∞–Ω—å–æ–Ω</label>
        <div class="taskLabel" data-i18n="task9_desc">‚Äî –†–∞—Å—à–∏—Ñ—Ä—É–π—Ç–µ ‚Äú–î–ù–ö –ª—é–±–≤–∏‚Äù</div>
        <select name="task9_rating" class="ratingSelect">
          <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
          <option value="5" data-rate="5"></option>
          <option value="4" data-rate="4"></option>
          <option value="3" data-rate="3"></option>
          <option value="2" data-rate="2"></option>
          <option value="1" data-rate="1"></option>
        </select>
      </div>
    </div>

    <div class="hr"></div>

    <!-- 6 -->
    <div class="qtitle" data-i18n="q6_title">–ë—ã–ª –ª–∏ –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –≤—ã —É—Å—Ç–∞–ª–∏ –∏–ª–∏ –ø–æ—Ç–µ—Ä—è–ª–∏ —Ñ–æ–∫—É—Å?</div>
    <select name="fatigue">
      <option value="" data-i18n="select">–í—ã–±–µ—Ä–∏—Ç–µ</option>
      <option value="No ‚Äî it stayed dynamic" data-i18n="fa1">–ù–µ—Ç ‚Äî –≤—Å—ë –ø—Ä–æ—à–ª–æ –¥–∏–Ω–∞–º–∏—á–Ω–æ</option>
      <option value="Yes ‚Äî around the middle" data-i18n="fa2">–î–∞ ‚Äî –±–ª–∏–∂–µ –∫ —Å–µ—Ä–µ–¥–∏–Ω–µ</option>
      <option value="Yes ‚Äî closer to the end" data-i18n="fa3">–î–∞ ‚Äî –±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É</option>
    </select>

    <div class="hr"></div>

    <!-- 7 -->
    <div class="qtitle" data-i18n="q7_title">–í–∞—à –ª—é–±–∏–º—ã–π –º–æ–º–µ–Ω—Ç –∫–≤–µ—Å—Ç–∞</div>
    <textarea name="favorite_moment" data-i18n-ph="ph_fav"></textarea>

    <div class="hr"></div>

    <!-- 8 -->
    <div class="qtitle" data-i18n="q8_title">–ß—Ç–æ –±—ã –≤—ã —É–ª—É—á—à–∏–ª–∏ –∏–ª–∏ –¥–æ–±–∞–≤–∏–ª–∏ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑?</div>
    <textarea name="improve" data-i18n-ph="ph_improve"></textarea>

    <div class="hr"></div>

    <!-- 9 -->
    <div class="qtitle" data-i18n="q9_title">–û—Ç–∑—ã–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–∞–Ω–æ–Ω–∏–º–Ω—ã–π)</div>
    <div class="muted" data-i18n="pub_note">
      –í–æ–ø—Ä–æ—Å—ã 1‚Äì8 –º—ã —Å–æ–±–∏—Ä–∞–µ–º –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞. –í–æ–ø—Ä–æ—Å 9 ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π: –∞–Ω–æ–Ω–∏–º–Ω—ã–π –æ—Ç–∑—ã–≤, –∫–æ—Ç–æ—Ä—ã–π –º—ã –º–æ–∂–µ–º –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å.
    </div>
    <textarea name="public_review" data-i18n-ph="ph_public"></textarea>

    <div class="hr"></div>

    <button class="btn" id="submitBtn" type="submit" data-i18n="send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    <div id="msg"></div>
  </form>
</div>

<script type="module">
  import { API_URL } from './config.js';

  const form = document.getElementById('feedbackForm');
  const msg = document.getElementById('msg');
  const btn = document.getElementById('submitBtn');
  const langInput = document.getElementById('lang');

  document.getElementById('device_time').value = new Date().toISOString();
  document.getElementById('source_page').value = location.href;

  function applyRatingLabels(lang) {
    const map = {
      en: {
        5: "5 ‚Äî üòç Loved it",
        4: "4 ‚Äî üòä Liked it",
        3: "3 ‚Äî üòê Okay",
        2: "2 ‚Äî üòï Not great",
        1: "1 ‚Äî üòû Did not like"
      },
      ru: {
        5: "5 ‚Äî üòç –û—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å",
        4: "4 ‚Äî üòä –ü–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å",
        3: "3 ‚Äî üòê –ù–æ—Ä–º–∞–ª—å–Ω–æ",
        2: "2 ‚Äî üòï –ù–µ –æ—á–µ–Ω—å",
        1: "1 ‚Äî üòû –ù–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å"
      }
    };

    document.querySelectorAll('option[data-rate]').forEach(opt => {
      const k = opt.getAttribute('data-rate');
      opt.textContent = map[lang][k];
    });
  }

  function applyLang(lang) {
    langInput.value = lang;

    document.querySelectorAll('[data-i18n]').forEach(el => {
      const key = el.getAttribute('data-i18n');
      if (dict[lang][key]) el.textContent = dict[lang][key];
    });

    document.querySelectorAll('[data-i18n-ph]').forEach(el => {
      const key = el.getAttribute('data-i18n-ph');
      if (dict[lang][key]) el.setAttribute('placeholder', dict[lang][key]);
    });

    document.getElementById('btnEN').classList.toggle('active', lang === 'en');
    document.getElementById('btnRU').classList.toggle('active', lang === 'ru');

    applyRatingLabels(lang);
  }

  function collectChecked(name) {
    return Array.from(form.querySelectorAll(`input[name="${name}"]:checked`))
      .map(n => n.value)
      .join("; ");
  }

  /* Protection: None vs tasks */
  const hardBlock = document.getElementById('hardTasksBlock');
  const noneBox = hardBlock.querySelector('[data-none]');
  const taskBoxes = hardBlock.querySelectorAll('input[name="hard_tasks_opt"]:not([data-none])');

  function refreshHardTasksProtection() {
    const anyTaskChecked = Array.from(taskBoxes).some(b => b.checked);

    if (noneBox.checked) {
      taskBoxes.forEach(b => { b.checked = false; b.disabled = true; });
      noneBox.disabled = false;
      return;
    }

    taskBoxes.forEach(b => b.disabled = false);
    noneBox.disabled = anyTaskChecked;
  }

  noneBox.addEventListener('change', () => {
    refreshHardTasksProtection();
  });

  taskBoxes.forEach(b => {
    b.addEventListener('change', () => {
      if (b.checked) noneBox.checked = false;
      refreshHardTasksProtection();
    });
  });

  const dict = {
    en: {
      title: "Tbilisi City Quest ‚Äî Feedback",
      intro: "Thank you for joining the quest. Your feedback helps improve future quests.",
      select: "Select",

      q1_title: "How did you like the Tbilisi City Quest? (1‚Äì10)",
      q1_sub: "10 means you liked it very much.",

      q2_title: "What did you like the most?",
      q2_sub: "You can choose several options.",
      lm1: "Tasks & questions",
      lm2: "Culture & history",
      lm3: "Route & city",
      lm4: "Bonus questions",
      lm5: "Improv game at the hotel",
      lm6: "Khinkali at Zodiaco",

      q3_title: "What was missing?",
      q3_sub: "What task types would you like to add? (choose any)",
      at1: "Logic puzzles",
      at2: "Music contests",
      at3: "Painting tasks (draw something)",
      at4: "Emotional / scary tasks",
      at5: "Sport / obstacle challenges",

      q4_title: "Were any tasks difficult or unclear?",
      q4_sub: "You can choose several.",
      none: "None",

      task1_title: "Biltmore Hotel",
      task1_desc: "‚Äî The philosopher‚Äôs last name",
      task2_title: "Museum of Modern Art (MoMA)",
      task2_desc: "‚Äî Apple",
      task3_title: "National Gallery",
      task3_desc: "‚Äî The artist with a brush and a palette",
      task4_title: "Alexander Park",
      task4_desc: "‚Äî The artist‚Äôs monument and a dog",
      task5_title: "Orbeliani Garden",
      task5_desc: "‚Äî Six musicians: the one wearing a bow tie",
      task6_title: "Laghidze",
      task6_desc: "‚Äî Composer",
      task7_title: "Ambassadori Hotel",
      task7_desc: "‚Äî Pirosmani picture hero",
      task8_title: "Ietim Gurji",
      task8_desc: "‚Äî Singer and bird",
      task9_title: "Canyon",
      task9_desc: "‚Äî ‚ÄúDNA of Love‚Äù",

      q5_title: "Rate each task (1‚Äì5)",
      q5_sub: "1 = did not like, 5 = loved it.",

      q6_title: "Did you feel tired or lose focus?",
      fa1: "No ‚Äî it stayed dynamic",
      fa2: "Yes ‚Äî around the middle",
      fa3: "Yes ‚Äî closer to the end",

      q7_title: "Your favorite moment of the quest",
      ph_fav: "A specific scene, a funny moment, a place, a task, anything.",

      q8_title: "What should we improve or add next time?",
      ph_improve: "Be brutally honest ‚Äî this is the most valuable field üôÇ",

      q9_title: "Public review (anonymous)",
      pub_note: "Questions 1‚Äì8 are for internal improvement. Question 9 is separate: an anonymous review we may publish.",
      ph_public: "Write a short honest review so other people can understand the impression of the quest.",

      send: "Send feedback"
    },

    ru: {
      title: "Tbilisi City Quest ‚Äî –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å",
      intro: "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ –∫–≤–µ—Å—Ç–µ. –≠—Ç–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ–º–æ–∂–µ—Ç —É–ª—É—á—à–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–≤–µ—Å—Ç—ã.",
      select: "–í—ã–±–µ—Ä–∏—Ç–µ",

      q1_title: "–ö–∞–∫ –≤–∞–º –≤ —Ü–µ–ª–æ–º –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è Tbilisi City Quest? (1‚Äì10)",
      q1_sub: "10 ‚Äî —ç—Ç–æ –º–∞–∫—Å–∏–º—É–º (–∑–Ω–∞—á–∏—Ç –≤–∞–º –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å).",

      q2_title: "–ß—Ç–æ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
      q2_sub: "–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.",
      lm1: "–ó–∞–¥–∞–Ω–∏—è –∏ –≤–æ–ø—Ä–æ—Å—ã",
      lm2: "–ö—É–ª—å—Ç—É—Ä–∞ –∏ –∏—Å—Ç–æ—Ä–∏—è",
      lm3: "–ú–∞—Ä—à—Ä—É—Ç –∏ –≥–æ—Ä–æ–¥",
      lm4: "–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã",
      lm5: "–ò–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è –∏–≥—Ä–∞ –≤ –æ—Ç–µ–ª–µ",
      lm6: "–•–∏–Ω–∫–∞–ª–∏ –≤ Zodiaco",

      q3_title: "–ö–∞–∫–∏—Ö –∑–∞–¥–∞–Ω–∏–π –≤–∞–º –Ω–µ —Ö–≤–∞—Ç–∏–ª–æ?",
      q3_sub: "–ö–∞–∫–∏–µ —Ç–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π –¥–æ–±–∞–≤–∏—Ç—å –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑? (–º–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ)",
      at1: "–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–¥–∞—á–∏",
      at2: "–ú—É–∑—ã–∫–∞–ª—å–Ω—ã–µ –∫–æ–Ω–∫—É—Ä—Å—ã",
      at3: "–ó–∞–¥–∞–Ω–∏—è —Å –∂–∏–≤–æ–ø–∏—Å—å—é ‚Äî —á—Ç–æ-—Ç–æ –∏–∑–æ–±—Ä–∞–∑–∏—Ç—å",
      at4: "–≠–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω–æ-–ø—É–≥–∞—é—â–∏–µ –∑–∞–¥–∞–Ω–∏—è",
      at5: "–ó–∞–¥–∞–Ω–∏—è –Ω–∞ —Å–ø–æ—Ä—Ç–∏–≤–Ω–æ–µ –ø—Ä–µ–æ–¥–æ–ª–µ–Ω–∏–µ –ø—Ä–µ–ø—è—Ç—Å—Ç–≤–∏–π",

      q4_title: "–ë—ã–ª–∏ –ª–∏ –∑–∞–¥–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑–∞–ª–∏—Å—å —Å–ª–æ–∂–Ω—ã–º–∏ –∏–ª–∏ –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–º–∏?",
      q4_sub: "–ú–æ–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤.",
      none: "–ù–µ—Ç",

      task1_title: "–û—Ç–µ–ª—å Biltmore",
      task1_desc: "‚Äî –§–∞–º–∏–ª–∏—è —Ñ–∏–ª–æ—Å–æ—Ñ–∞.",
      task2_title: "–ú—É–∑–µ–π —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ –∏—Å–∫—É—Å—Å—Ç–≤–∞ (MoMA)",
      task2_desc: "‚Äî –Ø–±–ª–æ–∫–æ",
      task3_title: "–ù–∞—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –≥–∞–ª–µ—Ä–µ—è",
      task3_desc: "‚Äî –•—É–¥–æ–∂–Ω–∏–∫ —Å –∫–∏—Å—Ç–æ—á–∫–æ–π –∏ –ø–∞–ª–∏—Ç—Ä–æ–π",
      task4_title: "–ü–∞—Ä–∫ –ê–ª–µ–∫—Å–∞–Ω–¥—Ä–∞",
      task4_desc: "‚Äî –ü–∞–º—è—Ç–Ω–∏–∫ —Ö—É–¥–æ–∂–Ω–∏–∫—É –∏ —Å–æ–±–∞–∫–∞",
      task5_title: "–°–∞–¥ –û—Ä–±–µ–ª–∏–∞–Ω–∏",
      task5_desc: "‚Äî 6 –º—É–∑—ã–∫–∞–Ω—Ç–æ–≤: –Ω–∞–π–¥–∏—Ç–µ —Ç–æ–≥–æ, –∫—Ç–æ –≤ –±–∞–±–æ—á–∫–µ",
      task6_title: "–õ–∞–≥–∏–¥–∑–µ",
      task6_desc: "‚Äî –ö–æ–º–ø–æ–∑–∏—Ç–æ—Ä",
      task7_title: "Ambassadori Hotel",
      task7_desc: "‚Äî –ü–µ—Ä—Å–æ–Ω–∞–∂ —Å –ü–∏—Ä–æ—Å–º–∞–Ω–∏",
      task8_title: "–ò–µ—Ç–∏–º –ì—É—Ä–¥–∂–∏",
      task8_desc: "‚Äî –ü–µ–≤–µ—Ü –∏ –ø—Ç–∏—Ü–∞",
      task9_title: "–ö–∞–Ω—å–æ–Ω",
      task9_desc: "‚Äî –†–∞—Å—à–∏—Ñ—Ä—É–π—Ç–µ ‚Äú–î–ù–ö –ª—é–±–≤–∏‚Äù",

      q5_title: "–û—Ü–µ–Ω–∏—Ç–µ –∫–∞–∂–¥–æ–µ –∏–∑ 9 –∑–∞–¥–∞–Ω–∏–π (1‚Äì5)",
      q5_sub: "1 ‚Äî –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å, 5 ‚Äî –æ—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å.",

      q6_title: "–ë—ã–ª –ª–∏ –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –≤—ã —É—Å—Ç–∞–ª–∏ –∏–ª–∏ –ø–æ—Ç–µ—Ä—è–ª–∏ —Ñ–æ–∫—É—Å?",
      fa1: "–ù–µ—Ç ‚Äî –≤—Å—ë –ø—Ä–æ—à–ª–æ –¥–∏–Ω–∞–º–∏—á–Ω–æ",
      fa2: "–î–∞ ‚Äî –±–ª–∏–∂–µ –∫ —Å–µ—Ä–µ–¥–∏–Ω–µ",
      fa3: "–î–∞ ‚Äî –±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É",

      q7_title: "–í–∞—à –ª—é–±–∏–º—ã–π –º–æ–º–µ–Ω—Ç –∫–≤–µ—Å—Ç–∞",
      ph_fav: "–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å—Ü–µ–Ω–∞, —Å–º–µ—à–Ω–æ–π –º–æ–º–µ–Ω—Ç, –º–µ—Å—Ç–æ, –∑–∞–¥–∞–Ω–∏–µ ‚Äî —á—Ç–æ —É–≥–æ–¥–Ω–æ.",

      q8_title: "–ß—Ç–æ –±—ã –≤—ã —É–ª—É—á—à–∏–ª–∏ –∏–ª–∏ –¥–æ–±–∞–≤–∏–ª–∏ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑?",
      ph_improve: "–ë—É–¥—å—Ç–µ —á–µ—Å—Ç–Ω—ã–º–∏ ‚Äî —ç—Ç–æ —Å–∞–º–æ–µ —Ü–µ–Ω–Ω–æ–µ –ø–æ–ª–µ üôÇ",

      q9_title: "–û—Ç–∑—ã–≤ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ (–∞–Ω–æ–Ω–∏–º–Ω—ã–π)",
      pub_note: "–í–æ–ø—Ä–æ—Å—ã 1‚Äì8 –º—ã —Å–æ–±–∏—Ä–∞–µ–º –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∞–Ω–∞–ª–∏–∑–∞. –í–æ–ø—Ä–æ—Å 9 ‚Äî –æ—Ç–¥–µ–ª—å–Ω—ã–π: –∞–Ω–æ–Ω–∏–º–Ω—ã–π –æ—Ç–∑—ã–≤, –∫–æ—Ç–æ—Ä—ã–π –º—ã –º–æ–∂–µ–º –æ–ø—É–±–ª–∏–∫–æ–≤–∞—Ç—å.",
      ph_public: "–ù–∞–ø–∏—à–∏—Ç–µ —á–µ—Å—Ç–Ω—ã–π –æ–±—â–∏–π –æ—Ç–∑—ã–≤, —á—Ç–æ–±—ã –¥—Ä—É–≥–∏–µ –ª—é–¥–∏ –º–æ–≥–ª–∏ –ø–æ–Ω—è—Ç—å –≤–ø–µ—á–∞—Ç–ª–µ–Ω–∏–µ –æ –∫–≤–µ—Å—Ç–µ.",

      send: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
    }
  };

  document.getElementById('btnEN').addEventListener('click', () => applyLang('en'));
  document.getElementById('btnRU').addEventListener('click', () => applyLang('ru'));

  // default RU
  applyLang('ru');
  refreshHardTasksProtection();

  form.addEventListener('submit', async e => {
    e.preventDefault();
    msg.textContent = '';
    msg.className = '';
    btn.disabled = true;

    document.getElementById('device_time').value = new Date().toISOString();
    document.getElementById('source_page').value = location.href;

    const data = new URLSearchParams();
    data.set('lang', langInput.value);
    data.set('device_time', document.getElementById('device_time').value);
    data.set('source_page', document.getElementById('source_page').value);

    data.set('overall_10', form.overall_10.value);
    data.set('liked_most', collectChecked('liked_most_opt'));
    data.set('add_types', collectChecked('add_types_opt'));
    data.set('hard_tasks', collectChecked('hard_tasks_opt'));

    data.set('task1_rating', form.task1_rating.value);
    data.set('task2_rating', form.task2_rating.value);
    data.set('task3_rating', form.task3_rating.value);
    data.set('task4_rating', form.task4_rating.value);
    data.set('task5_rating', form.task5_rating.value);
    data.set('task6_rating', form.task6_rating.value);
    data.set('task7_rating', form.task7_rating.value);
    data.set('task8_rating', form.task8_rating.value);
    data.set('task9_rating', form.task9_rating.value);

    data.set('fatigue', form.fatigue.value);
    data.set('favorite_moment', (form.favorite_moment.value || '').trim());
    data.set('improve', (form.improve.value || '').trim());
    data.set('public_review', (form.public_review.value || '').trim());

    try {
      await fetch(API_URL, {
        method: 'POST',
        mode: 'no-cors',
        headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
        body: data.toString()
      });

      msg.textContent = (langInput.value === 'ru')
        ? '–°–ø–∞—Å–∏–±–æ! üôå –û—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω.'
        : 'Thank you! üôå Your feedback was sent.';
      msg.className = 'ok';

      const currentLang = langInput.value;
      form.reset();
      applyLang(currentLang);
      refreshHardTasksProtection();
    } catch (err) {
      msg.textContent = (langInput.value === 'ru')
        ? '–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.'
        : 'Error: could not send. Please try again.';
      msg.className = 'err';
      console.error(err);
    } finally {
      btn.disabled = false;
    }
  });
</script>

</body>
</html>
