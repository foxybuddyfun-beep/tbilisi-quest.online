<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Tbilisi City Quest ‚Äî Feedback</title>
  <style>
    body{font-family:system-ui,Arial;margin:0;background:#f6f7fb;color:#111827}
    .wrap{max-width:980px;margin:0 auto;padding:20px}
    .card{background:#fff;border-radius:16px;padding:18px;box-shadow:0 6px 24px rgba(0,0,0,.06);margin-bottom:14px}
    h1{margin:0 0 6px;font-size:22px}
    .muted{color:#667085;font-size:14px;line-height:1.45}
    h2{margin:18px 0 10px;font-size:18px}
    label{display:block;margin:10px 0 6px;font-weight:600}
    input[type="text"], textarea, select{
      width:100%;box-sizing:border-box;border:1px solid #d0d5dd;border-radius:12px;
      padding:10px 12px;font-size:15px;background:#fff
    }
    textarea{min-height:90px;resize:vertical}
    .row{display:flex;gap:12px;flex-wrap:wrap}
    .col{flex:1;min-width:240px}
    .options{display:flex;flex-direction:column;gap:8px;margin-top:8px}
    .opt{display:flex;gap:10px;align-items:flex-start}
    .opt input{margin-top:3px}
    .hr{height:1px;background:#eef2f6;margin:16px 0}
    .btn{
      display:inline-block;background:#111827;color:#fff;border:0;border-radius:12px;
      padding:10px 14px;font-size:15px;cursor:pointer
    }
    .btn:disabled{opacity:.6;cursor:not-allowed}
    .ok{color:#16a34a;font-weight:700;margin-top:10px}
    .err{color:#dc2626;font-weight:700;margin-top:10px}
    .small{font-size:13px;color:#667085}
    .langbar{display:flex;gap:10px;align-items:center;justify-content:space-between}
    .langbtns{display:flex;gap:8px}
    .chip{
      border:1px solid #d0d5dd;background:#fff;border-radius:999px;padding:8px 12px;
      font-size:14px;cursor:pointer
    }
    .chip.active{background:#111827;color:#fff;border-color:#111827}
    a{color:#111827}
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Header / Intro -->
    <div class="card">
      <div class="langbar">
        <div>
          <h1 data-i18n="title">Tbilisi City Quest ‚Äî Feedback</h1>
          <div class="muted" data-i18n="intro">
            Thank you for joining the quest! I‚Äôm David, the organizer.
            This feedback helps me improve the next quests.
          </div>
        </div>
        <div class="langbtns">
          <button type="button" class="chip active" id="btnEN">EN</button>
          <button type="button" class="chip" id="btnRU">RU</button>
        </div>
      </div>

      <div class="hr"></div>

      <div class="muted" data-i18n="bonus">
        I‚Äôm also sharing the photos from the Bonus Points locations here:
        <span class="small">(Google Drive folder)</span>
      </div>
      <div style="margin-top:8px">
        <a href="https://drive.google.com/drive/folders/19heIL2brz2fOwoCunBCAbF-lrwKZyYnd?usp=sharing"
           target="_blank" rel="noopener noreferrer"
           data-i18n="bonus_link">Open the Bonus Photos folder</a>
      </div>

      <div class="hr"></div>

      <div class="muted" data-i18n="timehint">
        This form takes ~5‚Äì7 minutes. Please answer honestly ‚Äî it really helps üôå
      </div>
    </div>

    <!-- Form -->
    <form id="feedbackForm" class="card">
      <!-- hidden meta -->
      <input type="hidden" name="lang" id="lang" value="en" />
      <input type="hidden" name="device_time" id="device_time" value="" />
      <input type="hidden" name="source_page" id="source_page" value="" />

      <!-- Team -->
      <h2 data-i18n="sec_team">Team</h2>

      <label for="team_name" data-i18n="team_label">Team name *</label>
      <select id="team_name" name="team_name" required>
        <option value="" data-i18n="select">Select</option>
        <option value="Eggplants">Eggplants</option>
        <option value="Singulanities">Singulanities</option>
        <option value="NDA">NDA</option>
      </select>

      <div class="hr"></div>

      <!-- 1Ô∏è‚É£ Overall -->
      <h2 data-i18n="sec1">1Ô∏è‚É£ Overall experience</h2>

      <label for="overall_rating" data-i18n="q_overall">How did you like the Tbilisi City Quest? *</label>
      <select id="overall_rating" name="overall_rating" required>
        <option value="" data-i18n="select">Select</option>
        <option value="5" data-i18n="r5">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Loved it</option>
        <option value="4" data-i18n="r4">‚≠ê‚≠ê‚≠ê‚≠ê Liked it</option>
        <option value="3" data-i18n="r3">‚≠ê‚≠ê‚≠ê Okay</option>
        <option value="2" data-i18n="r2">‚≠ê‚≠ê Mostly not</option>
        <option value="1" data-i18n="r1">‚≠ê Did not like</option>
      </select>

      <label data-i18n="q_feelings">What best describes your feelings? (choose up to 2)</label>
      <div class="options" data-limit="2">
        <label class="opt"><input type="checkbox" name="feelings_opt" value="Interesting & intellectual"><span data-i18n="f1">Interesting & intellectual</span></label>
        <label class="opt"><input type="checkbox" name="feelings_opt" value="Fun & light"><span data-i18n="f2">Fun & light</span></label>
        <label class="opt"><input type="checkbox" name="feelings_opt" value="Great way to explore the city"><span data-i18n="f3">Great way to explore the city</span></label>
        <label class="opt"><input type="checkbox" name="feelings_opt" value="Team bonding"><span data-i18n="f4">Team bonding</span></label>
        <label class="opt"><input type="checkbox" name="feelings_opt" value="Unexpected & creative"><span data-i18n="f5">Unexpected & creative</span></label>
      </div>

      <div class="hr"></div>

      <!-- 2Ô∏è‚É£ Tasks & route -->
      <h2 data-i18n="sec2">2Ô∏è‚É£ Tasks and route</h2>

      <label data-i18n="q_tasktypes">What type of tasks did you like the most?</label>
      <div class="options">
        <label class="opt"><input type="checkbox" name="liked_task_types_opt" value="Monuments & visual clues"><span data-i18n="t1">Monuments & visual clues</span></label>
        <label class="opt"><input type="checkbox" name="liked_task_types_opt" value="Logic puzzles"><span data-i18n="t2">Logic puzzles</span></label>
        <label class="opt"><input type="checkbox" name="liked_task_types_opt" value="Culture & stories"><span data-i18n="t3">Culture & stories</span></label>
        <label class="opt"><input type="checkbox" name="liked_task_types_opt" value="Attention & associations"><span data-i18n="t4">Attention & associations</span></label>
        <label class="opt"><input type="checkbox" name="liked_task_types_opt" value="Photo challenge (Bonus Points)"><span data-i18n="t5">Photo challenge (Bonus Points)</span></label>
      </div>

      <label for="hard_tasks" data-i18n="q_hard">Were any tasks too hard or unclear? If yes ‚Äî which ones?</label>
      <textarea id="hard_tasks" name="hard_tasks" data-i18n-ph="ph_hard" placeholder="Example: The Gurji bird clue was confusing; the Canyon DNA of Love felt too open-ended..."></textarea>

      <div class="hr"></div>

      <!-- 3Ô∏è‚É£ Guide & format -->
      <h2 data-i18n="sec3">3Ô∏è‚É£ Format and support</h2>

      <label for="guide_rating" data-i18n="q_guide">How do you rate the team support during the quest? (1‚Äì5)</label>
      <select id="guide_rating" name="guide_rating">
        <option value="" data-i18n="select">Select</option>
        <option value="5" data-i18n="g5">5 ‚Äî Excellent</option>
        <option value="4" data-i18n="g4">4 ‚Äî Good</option>
        <option value="3" data-i18n="g3">3 ‚Äî Okay</option>
        <option value="2" data-i18n="g2">2 ‚Äî Weak</option>
        <option value="1" data-i18n="g1">1 ‚Äî Poor</option>
      </select>

      <label data-i18n="q_helped">What helped you most during the quest?</label>
      <div class="options">
        <label class="opt"><input type="checkbox" name="helpful_factors_opt" value="Hints and guidance"><span data-i18n="h1">Hints and guidance</span></label>
        <label class="opt"><input type="checkbox" name="helpful_factors_opt" value="Task structure"><span data-i18n="h2">Task structure</span></label>
        <label class="opt"><input type="checkbox" name="helpful_factors_opt" value="Teamwork"><span data-i18n="h3">Teamwork</span></label>
        <label class="opt"><input type="checkbox" name="helpful_factors_opt" value="Game atmosphere"><span data-i18n="h4">Game atmosphere</span></label>
      </div>

      <div class="hr"></div>

      <!-- 4Ô∏è‚É£ Improv in hotel -->
      <h2 data-i18n="sec4">4Ô∏è‚É£ Improv warm-up at the hotel</h2>

      <label for="improv_overall" data-i18n="q_improv">How did you like the improv game (posing as Pirosmani paintings)?</label>
      <select id="improv_overall" name="improv_overall">
        <option value="" data-i18n="select">Select</option>
        <option value="üî• Loved it ‚Äî started the quest with energy" data-i18n="i1">üî• Loved it ‚Äî started the quest with energy</option>
        <option value="üôÇ Liked it" data-i18n="i2">üôÇ Liked it</option>
        <option value="ü§î Not fully understood" data-i18n="i3">ü§î Not fully understood</option>
        <option value="üôÉ Not my format" data-i18n="i4">üôÉ Not my format</option>
      </select>

      <label for="improv_warmup_rating" data-i18n="q_warmup">How much did it help you ‚Äúwarm up‚Äù before the quest? (1‚Äì5)</label>
      <select id="improv_warmup_rating" name="improv_warmup_rating">
        <option value="" data-i18n="select">Select</option>
        <option value="5" data-i18n="w5">5 ‚Äî A lot</option>
        <option value="4" data-i18n="w4">4</option>
        <option value="3" data-i18n="w3">3</option>
        <option value="2" data-i18n="w2">2</option>
        <option value="1" data-i18n="w1">1 ‚Äî Not at all</option>
      </select>

      <div class="hr"></div>

      <!-- 5Ô∏è‚É£ Timing -->
      <h2 data-i18n="sec5">5Ô∏è‚É£ Timing and energy</h2>

      <label for="duration" data-i18n="q_duration">How was the quest duration?</label>
      <select id="duration" name="duration">
        <option value="" data-i18n="select">Select</option>
        <option value="Perfect" data-i18n="d1">‚è± Perfect</option>
        <option value="Could be shorter" data-i18n="d2">‚è≥ Could be shorter</option>
        <option value="Would like longer" data-i18n="d3">üï∞ Would like longer</option>
      </select>

      <label for="fatigue" data-i18n="q_fatigue">Did you feel tired or lose focus at any point?</label>
      <select id="fatigue" name="fatigue">
        <option value="" data-i18n="select">Select</option>
        <option value="No ‚Äî it stayed dynamic" data-i18n="fa1">No ‚Äî it stayed dynamic</option>
        <option value="Yes ‚Äî around the middle" data-i18n="fa2">Yes ‚Äî around the middle</option>
        <option value="Yes ‚Äî closer to the end" data-i18n="fa3">Yes ‚Äî closer to the end</option>
      </select>

      <div class="hr"></div>

      <!-- 6Ô∏è‚É£ Team effect -->
      <h2 data-i18n="sec6">6Ô∏è‚É£ Team effect</h2>

      <label data-i18n="q_team">How did the quest affect your team?</label>
      <div class="options">
        <label class="opt"><input type="checkbox" name="team_effect_opt" value="We communicated more"><span data-i18n="te1">We communicated more</span></label>
        <label class="opt"><input type="checkbox" name="team_effect_opt" value="More jokes and lightness appeared"><span data-i18n="te2">More jokes and lightness appeared</span></label>
        <label class="opt"><input type="checkbox" name="team_effect_opt" value="I saw colleagues from a new side"><span data-i18n="te3">I saw colleagues from a new side</span></label>
        <label class="opt"><input type="checkbox" name="team_effect_opt" value="No change"><span data-i18n="te4">No change</span></label>
      </div>

      <label for="favorite_moment" data-i18n="q_fav">Your favorite moment of the quest</label>
      <textarea id="favorite_moment" name="favorite_moment" data-i18n-ph="ph_fav" placeholder="A specific scene, a funny moment, a place, a task, anything."></textarea>

      <div class="hr"></div>

      <!-- 7Ô∏è‚É£ Recommendation -->
      <h2 data-i18n="sec7">7Ô∏è‚É£ Final: recommendation and improvements</h2>

      <label for="recommend" data-i18n="q_rec">Would you recommend this team-building format to other teams?</label>
      <select id="recommend" name="recommend">
        <option value="" data-i18n="select">Select</option>
        <option value="Yes, definitely" data-i18n="rec1">Yes, definitely</option>
        <option value="Probably yes" data-i18n="rec2">Probably yes</option>
        <option value="Probably no" data-i18n="rec3">Probably no</option>
        <option value="No" data-i18n="rec4">No</option>
      </select>

      <label for="improve" data-i18n="q_improve">What should we improve or add next time?</label>
      <textarea id="improve" name="improve" data-i18n-ph="ph_improve" placeholder="Be brutally honest ‚Äî this is the most valuable field üôÇ"></textarea>

      <div class="hr"></div>

      <!-- 8Ô∏è‚É£ Bonus -->
      <h2 data-i18n="sec8">8Ô∏è‚É£ Optional bonus</h2>

      <label for="quest_title" data-i18n="q_title">If you could name this quest ‚Äî what would it be?</label>
      <input id="quest_title" name="quest_title" type="text" data-i18n-ph="ph_title" placeholder="One short catchy title" />

      <div class="hr"></div>

      <button class="btn" id="submitBtn" type="submit" data-i18n="send">Send feedback</button>
      <div id="msg"></div>
    </form>
  </div>

  <script>
    // 1) Paste your Google Apps Script Web App URL here
    const WEB_APP_URL = "PASTE_YOUR_WEB_APP_URL_HERE";

    const form = document.getElementById('feedbackForm');
    const msg = document.getElementById('msg');
    const btn = document.getElementById('submitBtn');
    const langInput = document.getElementById('lang');

    // Meta
    document.getElementById('device_time').value = new Date().toISOString();
    document.getElementById('source_page').value = location.href;

    function collectChecked(name) {
      const nodes = form.querySelectorAll(`input[name="${name}"]:checked`);
      return Array.from(nodes).map(n => n.value).join("; ");
    }

    // Limit feelings to 2
    (function limitFeelingsTo2(){
      const boxWrap = form.querySelector('.options[data-limit="2"]');
      if (!boxWrap) return;
      const boxes = boxWrap.querySelectorAll('input[type="checkbox"][name="feelings_opt"]');
      boxes.forEach(b => {
        b.addEventListener('change', () => {
          const checked = boxWrap.querySelectorAll('input[name="feelings_opt"]:checked');
          if (checked.length > 2) b.checked = false;
        });
      });
    })();

    // i18n
    const dict = {
      en: {
        title: "Tbilisi City Quest ‚Äî Feedback",
        intro: "Thank you for joining the quest! I‚Äôm David, the organizer. This feedback helps me improve the next quests.",
        bonus: "I‚Äôm also sharing the photos from the Bonus Points locations here: (Google Drive folder)",
        bonus_link: "Open the Bonus Photos folder",
        timehint: "This form takes ~5‚Äì7 minutes. Please answer honestly ‚Äî it really helps üôå",

        sec_team: "Team",
        team_label: "Team name *",
        select: "Select",

        sec1: "1Ô∏è‚É£ Overall experience",
        q_overall: "How did you like the Tbilisi City Quest? *",
        r5: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê Loved it",
        r4: "‚≠ê‚≠ê‚≠ê‚≠ê Liked it",
        r3: "‚≠ê‚≠ê‚≠ê Okay",
        r2: "‚≠ê‚≠ê Mostly not",
        r1: "‚≠ê Did not like",
        q_feelings: "What best describes your feelings? (choose up to 2)",
        f1: "Interesting & intellectual",
        f2: "Fun & light",
        f3: "Great way to explore the city",
        f4: "Team bonding",
        f5: "Unexpected & creative",

        sec2: "2Ô∏è‚É£ Tasks and route",
        q_tasktypes: "What type of tasks did you like the most?",
        t1: "Monuments & visual clues",
        t2: "Logic puzzles",
        t3: "Culture & stories",
        t4: "Attention & associations",
        t5: "Photo challenge (Bonus Points)",
        q_hard: "Were any tasks too hard or unclear? If yes ‚Äî which ones?",
        ph_hard: "Example: The Gurji bird clue was confusing; the Canyon DNA of Love felt too open-ended...",

        sec3: "3Ô∏è‚É£ Format and support",
        q_guide: "How do you rate the team support during the quest? (1‚Äì5)",
        g5: "5 ‚Äî Excellent",
        g4: "4 ‚Äî Good",
        g3: "3 ‚Äî Okay",
        g2: "2 ‚Äî Weak",
        g1: "1 ‚Äî Poor",
        q_helped: "What helped you most during the quest?",
        h1: "Hints and guidance",
        h2: "Task structure",
        h3: "Teamwork",
        h4: "Game atmosphere",

        sec4: "4Ô∏è‚É£ Improv warm-up at the hotel",
        q_improv: "How did you like the improv game (posing as Pirosmani paintings)?",
        i1: "üî• Loved it ‚Äî started the quest with energy",
        i2: "üôÇ Liked it",
        i3: "ü§î Not fully understood",
        i4: "üôÉ Not my format",
        q_warmup: "How much did it help you ‚Äúwarm up‚Äù before the quest? (1‚Äì5)",
        w5: "5 ‚Äî A lot",
        w4: "4",
        w3: "3",
        w2: "2",
        w1: "1 ‚Äî Not at all",

        sec5: "5Ô∏è‚É£ Timing and energy",
        q_duration: "How was the quest duration?",
        d1: "‚è± Perfect",
        d2: "‚è≥ Could be shorter",
        d3: "üï∞ Would like longer",
        q_fatigue: "Did you feel tired or lose focus at any point?",
        fa1: "No ‚Äî it stayed dynamic",
        fa2: "Yes ‚Äî around the middle",
        fa3: "Yes ‚Äî closer to the end",

        sec6: "6Ô∏è‚É£ Team effect",
        q_team: "How did the quest affect your team?",
        te1: "We communicated more",
        te2: "More jokes and lightness appeared",
        te3: "I saw colleagues from a new side",
        te4: "No change",
        q_fav: "Your favorite moment of the quest",
        ph_fav: "A specific scene, a funny moment, a place, a task, anything.",

        sec7: "7Ô∏è‚É£ Final: recommendation and improvements",
        q_rec: "Would you recommend this team-building format to other teams?",
        rec1: "Yes, definitely",
        rec2: "Probably yes",
        rec3: "Probably no",
        rec4: "No",
        q_improve: "What should we improve or add next time?",
        ph_improve: "Be brutally honest ‚Äî this is the most valuable field üôÇ",

        sec8: "8Ô∏è‚É£ Optional bonus",
        q_title: "If you could name this quest ‚Äî what would it be?",
        ph_title: "One short catchy title",

        send: "Send feedback"
      },

      ru: {
        title: "–¢–±–∏–ª–∏—Å–∏ City Quest ‚Äî –û–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å",
        intro: "–°–ø–∞—Å–∏–±–æ, —á—Ç–æ —É—á–∞—Å—Ç–≤–æ–≤–∞–ª–∏ –≤ –∫–≤–µ—Å—Ç–µ! –Ø –î–∞–≤–∏–¥, –æ—Ä–≥–∞–Ω–∏–∑–∞—Ç–æ—Ä. –≠—Ç–∞ –æ–±—Ä–∞—Ç–Ω–∞—è —Å–≤—è–∑—å –ø–æ–º–æ–∂–µ—Ç –º–Ω–µ —Å–¥–µ–ª–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–≤–µ—Å—Ç—ã –ª—É—á—à–µ.",
        bonus: "–Ø —Ç–∞–∫–∂–µ –¥–µ–ª—é—Å—å —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—è–º–∏ –º–µ—Å—Ç –∏–∑ Bonus Points –∑–¥–µ—Å—å: (–ø–∞–ø–∫–∞ Google Drive)",
        bonus_link: "–û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É —Å –±–æ–Ω—É—Å–Ω—ã–º–∏ —Ñ–æ—Ç–æ",
        timehint: "–ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–π–º–µ—Ç ~5‚Äì7 –º–∏–Ω—É—Ç. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—á–∞–π—Ç–µ —á–µ—Å—Ç–Ω–æ ‚Äî —ç—Ç–æ –æ—á–µ–Ω—å –ø–æ–º–æ–≥–∞–µ—Ç üôå",

        sec_team: "–ö–æ–º–∞–Ω–¥–∞",
        team_label: "–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã *",
        select: "–í—ã–±–µ—Ä–∏—Ç–µ",

        sec1: "1Ô∏è‚É£ –û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞",
        q_overall: "–ö–∞–∫ –≤–∞–º –≤ —Ü–µ–ª–æ–º –ø–æ–Ω—Ä–∞–≤–∏–ª—Å—è Tbilisi City Quest? *",
        r5: "‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê –û—á–µ–Ω—å –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å",
        r4: "‚≠ê‚≠ê‚≠ê‚≠ê –ü–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å",
        r3: "‚≠ê‚≠ê‚≠ê –ù–æ—Ä–º–∞–ª—å–Ω–æ",
        r2: "‚≠ê‚≠ê –°–∫–æ—Ä–µ–µ –Ω–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å",
        r1: "‚≠ê –ù–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å",
        q_feelings: "–ß—Ç–æ –ª—É—á—à–µ –≤—Å–µ–≥–æ –æ–ø–∏—Å—ã–≤–∞–µ—Ç –≤–∞—à–∏ –æ—â—É—â–µ–Ω–∏—è? (–≤—ã–±–µ—Ä–∏—Ç–µ –¥–æ 2)",
        f1: "–ò–Ω—Ç–µ—Ä–µ—Å–Ω–æ –∏ –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω–æ",
        f2: "–í–µ—Å–µ–ª–æ –∏ –ª–µ–≥–∫–æ",
        f3: "–û—Ç–ª–∏—á–Ω—ã–π —Å–ø–æ—Å–æ–± –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≥–æ—Ä–æ–¥",
        f4: "–°–±–ª–∏–∂–∞–µ—Ç –∫–æ–º–∞–Ω–¥—É",
        f5: "–ù–µ–æ–∂–∏–¥–∞–Ω–Ω–æ –∏ –∫—Ä–µ–∞—Ç–∏–≤–Ω–æ",

        sec2: "2Ô∏è‚É£ –ó–∞–¥–∞–Ω–∏—è –∏ –º–∞—Ä—à—Ä—É—Ç",
        q_tasktypes: "–ö–∞–∫–∏–µ —Ç–∏–ø—ã –∑–∞–¥–∞–Ω–∏–π –ø–æ–Ω—Ä–∞–≤–∏–ª–∏—Å—å –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ?",
        t1: "–ü–∞–º—è—Ç–Ω–∏–∫–∏ –∏ –≤–∏–∑—É–∞–ª—å–Ω—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏",
        t2: "–õ–æ–≥–∏—á–µ—Å–∫–∏–µ –∑–∞–≥–∞–¥–∫–∏",
        t3: "–ö—É–ª—å—Ç—É—Ä–∞ –∏ –∏—Å—Ç–æ—Ä–∏–∏",
        t4: "–í–Ω–∏–º–∞–Ω–∏–µ –∏ –∞—Å—Å–æ—Ü–∏–∞—Ü–∏–∏",
        t5: "–§–æ—Ç–æ-—á–µ–ª–ª–µ–Ω–¥–∂ (Bonus Points)",
        q_hard: "–ë—ã–ª–∏ –ª–∏ –∑–∞–¥–∞–Ω–∏—è, –∫–æ—Ç–æ—Ä—ã–µ –ø–æ–∫–∞–∑–∞–ª–∏—Å—å —Å–ª–æ–∂–Ω—ã–º–∏ –∏–ª–∏ –Ω–µ–æ—á–µ–≤–∏–¥–Ω—ã–º–∏? –ï—Å–ª–∏ –¥–∞ ‚Äî –∫–∞–∫–∏–µ?",
        ph_hard: "–ù–∞–ø—Ä–∏–º–µ—Ä: –ø–æ–¥—Å–∫–∞–∑–∫–∞ –ø—Ä–æ –ø—Ç–∏—Ü—É —É Gurji –±—ã–ª–∞ –Ω–µ–ø–æ–Ω—è—Ç–Ω–æ–π; 'DNA of Love' –≤ –∫–∞–Ω—å–æ–Ω–µ —Å–ª–∏—à–∫–æ–º –æ—Ç–∫—Ä—ã—Ç–æ–µ...",

        sec3: "3Ô∏è‚É£ –§–æ—Ä–º–∞—Ç –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞",
        q_guide: "–ö–∞–∫ –≤—ã –æ—Ü–µ–Ω–∏–≤–∞–µ—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–º–∞–Ω–¥—ã –≤–æ –≤—Ä–µ–º—è –∫–≤–µ—Å—Ç–∞? (1‚Äì5)",
        g5: "5 ‚Äî –û—Ç–ª–∏—á–Ω–æ",
        g4: "4 ‚Äî –•–æ—Ä–æ—à–æ",
        g3: "3 ‚Äî –ù–æ—Ä–º–∞–ª—å–Ω–æ",
        g2: "2 ‚Äî –°–ª–∞–±–æ",
        g1: "1 ‚Äî –ü–ª–æ—Ö–æ",
        q_helped: "–ß—Ç–æ –ø–æ–º–æ–≥–∞–ª–æ –≤–∞–º –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –≤–æ –≤—Ä–µ–º—è –∫–≤–µ—Å—Ç–∞?",
        h1: "–ü–æ–¥—Å–∫–∞–∑–∫–∏ –∏ —Å–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ",
        h2: "–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∑–∞–¥–∞–Ω–∏–π",
        h3: "–†–∞–±–æ—Ç–∞ –≤ –∫–æ–º–∞–Ω–¥–µ",
        h4: "–ê—Ç–º–æ—Å—Ñ–µ—Ä–∞ –∏–≥—Ä—ã",

        sec4: "4Ô∏è‚É£ –ò–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏—è –≤ –æ—Ç–µ–ª–µ",
        q_improv: "–ö–∞–∫ –≤–∞–º –∏–º–ø—Ä–æ–≤–∏–∑–∞—Ü–∏–æ–Ω–Ω–∞—è –∏–≥—Ä–∞ (–ø–æ–∫–∞–∑–∞—Ç—å —Ç–µ–ª–∞–º–∏ –∫–∞—Ä—Ç–∏–Ω—ã –ü–∏—Ä–æ—Å–º–∞–Ω–∏)?",
        i1: "üî• –û—á–µ–Ω—å –∫—Ä—É—Ç–æ ‚Äî —Å—Ä–∞–∑—É –≤–∫–ª—é—á–∏–ª–æ –≤ –∏–≥—Ä—É",
        i2: "üôÇ –ü–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å",
        i3: "ü§î –ù–µ –¥–æ –∫–æ–Ω—Ü–∞ –ø–æ–Ω—è–ª –∏–¥–µ—é",
        i4: "üôÉ –ù–µ –º–æ–π —Ñ–æ—Ä–º–∞—Ç",
        q_warmup: "–ù–∞—Å–∫–æ–ª—å–∫–æ —ç—Ç–æ –ø–æ–º–æ–≥–ª–æ ‚Äú—Ä–∞–∑–æ–≥—Ä–µ—Ç—å—Å—è‚Äù –ø–µ—Ä–µ–¥ –∫–≤–µ—Å—Ç–æ–º? (1‚Äì5)",
        w5: "5 ‚Äî –û—á–µ–Ω—å –ø–æ–º–æ–≥–ª–æ",
        w4: "4",
        w3: "3",
        w2: "2",
        w1: "1 ‚Äî –ù–µ –ø–æ–º–æ–≥–ª–æ",

        sec5: "5Ô∏è‚É£ –î–∏–Ω–∞–º–∏–∫–∞ –∏ —Ç–∞–π–º–∏–Ω–≥",
        q_duration: "–ö–∞–∫ –≤–∞–º –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–≤–µ—Å—Ç–∞?",
        d1: "‚è± –ò–¥–µ–∞–ª—å–Ω–æ",
        d2: "‚è≥ –ú–æ–∂–Ω–æ –±—ã–ª–æ –∫–æ—Ä–æ—á–µ",
        d3: "üï∞ –•–æ—Ç–µ–ª–æ—Å—å –±—ã –¥–æ–ª—å—à–µ",
        q_fatigue: "–ë—ã–ª –ª–∏ –º–æ–º–µ–Ω—Ç, –∫–æ–≥–¥–∞ –≤—ã —É—Å—Ç–∞–ª–∏ –∏–ª–∏ –ø–æ—Ç–µ—Ä—è–ª–∏ —Ñ–æ–∫—É—Å?",
        fa1: "–ù–µ—Ç ‚Äî –≤—Å—ë –ø—Ä–æ—à–ª–æ –¥–∏–Ω–∞–º–∏—á–Ω–æ",
        fa2: "–î–∞ ‚Äî –±–ª–∏–∂–µ –∫ —Å–µ—Ä–µ–¥–∏–Ω–µ",
        fa3: "–î–∞ ‚Äî –±–ª–∏–∂–µ –∫ –∫–æ–Ω—Ü—É",

        sec6: "6Ô∏è‚É£ –ö–æ–º–∞–Ω–¥–Ω—ã–π —ç—Ñ—Ñ–µ–∫—Ç",
        q_team: "–ö–∞–∫ –∫–≤–µ—Å—Ç –ø–æ–≤–ª–∏—è–ª –Ω–∞ –≤–∞—à—É –∫–æ–º–∞–Ω–¥—É?",
        te1: "–ú—ã —Å—Ç–∞–ª–∏ –±–æ–ª—å—à–µ –æ–±—â–∞—Ç—å—Å—è",
        te2: "–ü–æ—è–≤–∏–ª–æ—Å—å –±–æ–ª—å—à–µ —à—É—Ç–æ–∫ –∏ –ª—ë–≥–∫–æ—Å—Ç–∏",
        te3: "–£–∑–Ω–∞–ª –∫–æ–ª–ª–µ–≥ —Å –Ω–æ–≤–æ–π —Å—Ç–æ—Ä–æ–Ω—ã",
        te4: "–ù–∏—á–µ–≥–æ –Ω–µ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å",
        q_fav: "–í–∞—à –ª—é–±–∏–º—ã–π –º–æ–º–µ–Ω—Ç –∫–≤–µ—Å—Ç–∞",
        ph_fav: "–ö–æ–Ω–∫—Ä–µ—Ç–Ω–∞—è —Å—Ü–µ–Ω–∞, —Å–º–µ—à–Ω–æ–π –º–æ–º–µ–Ω—Ç, –º–µ—Å—Ç–æ, –∑–∞–¥–∞–Ω–∏–µ ‚Äî —á—Ç–æ —É–≥–æ–¥–Ω–æ.",

        sec7: "7Ô∏è‚É£ –ò—Ç–æ–≥ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏",
        q_rec: "–ü–æ—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–ª–∏ –±—ã –≤—ã —Ç–∞–∫–æ–π —Ñ–æ—Ä–º–∞—Ç —Ç–∏–º–±–∏–ª–¥–∏–Ω–≥–∞ –¥—Ä—É–≥–∏–º –∫–æ–º–∞–Ω–¥–∞–º?",
        rec1: "–î–∞, —Ç–æ—á–Ω–æ",
        rec2: "–°–∫–æ—Ä–µ–µ –¥–∞",
        rec3: "–°–∫–æ—Ä–µ–µ –Ω–µ—Ç",
        rec4: "–ù–µ—Ç",
        q_improve: "–ß—Ç–æ –±—ã –≤—ã —É–ª—É—á—à–∏–ª–∏ –∏–ª–∏ –¥–æ–±–∞–≤–∏–ª–∏ –≤ —Å–ª–µ–¥—É—é—â–∏–π —Ä–∞–∑?",
        ph_improve: "–ë—É–¥—å—Ç–µ —á–µ—Å—Ç–Ω—ã–º–∏ ‚Äî —ç—Ç–æ —Å–∞–º–æ–µ —Ü–µ–Ω–Ω–æ–µ –ø–æ–ª–µ üôÇ",

        sec8: "8Ô∏è‚É£ –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π –±–æ–Ω—É—Å",
        q_title: "–ï—Å–ª–∏ –±—ã –≤—ã –¥–∞–ª–∏ –Ω–∞–∑–≤–∞–Ω–∏–µ —ç—Ç–æ–º—É –∫–≤–µ—Å—Ç—É ‚Äî –∫–∞–∫–∏–º –±—ã –æ–Ω–æ –±—ã–ª–æ?",
        ph_title: "–ö–æ—Ä–æ—Ç–∫–æ–µ —è—Ä–∫–æ–µ –Ω–∞–∑–≤–∞–Ω–∏–µ",

        send: "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
      }
    };

    function applyLang(lang) {
      langInput.value = lang;

      document.querySelectorAll('[data-i18n]').forEach(el => {
        const key = el.getAttribute('data-i18n');
        if (dict[lang][key]) el.textContent = dict[lang][key];
      });

      document.querySelectorAll('[data-i18n-ph]').forEach(el => {
        const key = el.getAttribute('data-i18n-ph');
        if (dict[lang][key]) el.setAttribute('placeholder', dict[lang][key]);
      });

      // Toggle active buttons
      document.getElementById('btnEN').classList.toggle('active', lang === 'en');
      document.getElementById('btnRU').classList.toggle('active', lang === 'ru');
    }

    document.getElementById('btnEN').addEventListener('click', () => applyLang('en'));
    document.getElementById('btnRU').addEventListener('click', () => applyLang('ru'));

    // Default language
    applyLang('en');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      msg.textContent = '';
      msg.className = '';
      btn.disabled = true;

      // Refresh meta
      document.getElementById('device_time').value = new Date().toISOString();
      document.getElementById('source_page').value = location.href;

      const data = new URLSearchParams();

      data.set('lang', langInput.value);
      data.set('team_name', form.team_name.value);

      data.set('overall_rating', form.overall_rating.value);
      data.set('hard_tasks', form.hard_tasks.value.trim());
      data.set('guide_rating', form.guide_rating.value);
      data.set('improv_overall', form.improv_overall.value);
      data.set('improv_warmup_rating', form.improv_warmup_rating.value);
      data.set('duration', form.duration.value);
      data.set('fatigue', form.fatigue.value);
      data.set('favorite_moment', form.favorite_moment.value.trim());
      data.set('recommend', form.recommend.value);
      data.set('improve', form.improve.value.trim());
      data.set('quest_title', form.quest_title.value.trim());
      data.set('device_time', document.getElementById('device_time').value);
      data.set('source_page', document.getElementById('source_page').value);

      data.set('feelings', collectChecked('feelings_opt'));
      data.set('liked_task_types', collectChecked('liked_task_types_opt'));
      data.set('helpful_factors', collectChecked('helpful_factors_opt'));
      data.set('team_effect', collectChecked('team_effect_opt'));

      try {
        await fetch(WEB_APP_URL, {
          method: 'POST',
          mode: 'no-cors',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8' },
          body: data.toString()
        });

        msg.textContent = (langInput.value === 'ru')
          ? '–°–ø–∞—Å–∏–±–æ! üôå –û—Ç–∑—ã–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω.'
          : 'Thank you! üôå Your feedback was sent.';
        msg.className = 'ok';
        form.reset();

        // Keep language after reset
        applyLang(langInput.value);
      } catch (err) {
        msg.textContent = (langInput.value === 'ru')
          ? '–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –æ—Ç–ø—Ä–∞–≤–∏—Ç—å. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â—ë —Ä–∞–∑.'
          : 'Error: could not send. Please try again.';
        msg.className = 'err';
        console.error(err);
      } finally {
        btn.disabled = false;
      }
    });
  </script>
</body>
</html>
